---
layout: post
title:  从零开始的2.5D游戏
categories: Unity
tags: Unity 2.5D 2D 斜45度 伪3D
author: zack.zhang
---

* content
{:toc}

游戏按照镜头视角来分，可以分为2D游戏、3D游戏，除此之外还有一类游戏被称为2.5D游戏。这是一个比较有争议的分类，这个分类有着不同的解释。有的人认为这只是厂商的噱头，它本身就是2D游戏（我曾经也这么认为，直到亲自做了一款2.5D游戏）；也有的人认为他是介于2D和3D之间的一种游戏类型，通常把斜视角的2D游戏称作2.5D游戏。

<!-- more -->

## 历史

2001年，盛大游戏推出了一款大型多人在线角色扮演游戏（MMORPG），风靡大江南北，那就是《热血传奇》。《热血传奇》被誉为中国网游的鼻祖，除了它很多开创性的玩法以外，更重要的在于在那个年代其画面的震撼程度。在那个年代，市面上很少看见画面如此精美的真3D游戏，不少人都被其画面视角蒙蔽，认为这就是一款精美的3D游戏。网络上有这么一句俗话：“游戏之于玩家，就像女人之于男人，必须重于画面”。《热血传奇》这一手以假乱真的伪3D，忽悠得不少懵懂无知的少年为其欲罢不能。

![mir2](https://zd304.github.io/assets/img/mir2.jpeg)<br/>

对比起同时代的Pokémon等2D游戏来说，其3D感更强。其中原因，除了绘画的精致外，更重要的是镜头朝向着游戏世界的侧面，而不是那么“耿直”的朝向游戏世界的正面。

![pekemon](https://zd304.github.io/assets/img/pokemon.png)<br/>

除了《热血传奇》，还有一些即时战略游戏（RTS）游戏也尝试了2.5D视角，并取得了成功，比如《红色警戒》、《星际争霸》。

随着游戏渲染技术的发展，大部分游戏都已经抛弃了2.5D的做法，转而做纯3D游戏了，但是现如今也还有一批游戏仍旧以2.5D的方式去渲染游戏。简单的分析可能是基于以下几点因素：

* 游戏成本限制，3D游戏需要复杂于2D游戏的制作流程、人员配置，会提高游戏成本

* 3D模型细节程度和画面渲染效率成反比，为了在高效运行效率的前提下，保留更多的模型细节

比如绝大部分“三消+”游戏，代表就是俄罗斯公司Playrix的《梦幻家园》，可见房间内部的每一个物件的细节都很精美地表现了出来。这些细节要是用3D模型的方式去做将会带来巨大的性能开销。

![homescape](https://zd304.github.io/assets/img/homescape.jpg)<br/>

## 问题

2.5D游戏仅仅是在2D游戏基础上把视角横向旋转了45度，但是制作难度却高出了不少。

2.5D视角带来的最核心的问题是每个图片和其他图片之间的遮挡关系如何处理，才能更符合人类对3D世界的常识性认知呢，也就是用2D的方式来模拟3D。

2D游戏的做法很简单粗暴。2D游戏世界中每一个物件都会用一个2维坐标来表示其位置，x表示其横向位置，y表示其纵向位置。**当一个物件的y值越小，也就是其越靠近画面底部，则渲染顺序越靠后**。就像一个画家在Photoshop上作画一样，离相机越近的图层要越后面画，才能盖住离相机远的图层，所以画家要从远到近地画。

但是2.5D却不能用这么简单的规则去解决问题，如下图所示。

![homescape_table_flower](https://zd304.github.io/assets/img/homescape_table_flower.png)<br/>

P1点的y值大于P2点的y值，如果按照2D游戏的做法，桌子应该是挡住花瓶的，那样就无法模拟3D世界了。

## 解决办法

![tile_matrix_transform](https://zd304.github.io/assets/img/tile_matrix_transform.gif)<br/>